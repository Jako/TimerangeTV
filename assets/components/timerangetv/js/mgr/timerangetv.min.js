/*!
 * TimerangeTV - Time Range Custom Template Variable
 * Version: 1.2.5
 * Build date: 2022-06-17
 */
var timerangetv=function(e){timerangetv.superclass.constructor.call(this,e=e||{})};Ext.extend(timerangetv,Ext.Component,{page:{},window:{},grid:{},tree:{},panel:{},combo:{},config:{},jquery:{},form:{}}),Ext.reg("timerangetv",timerangetv),TimerangeTV=new timerangetv,Ext.apply(Ext.form.VTypes,{timerange:function(e,t){var e=t.parseDate(e),a=e.format("Gi");if(!e)return!1;var n=Ext.getCmp(t.startTimeField),t=Ext.getCmp(t.endTimeField);return n&&(n.maxValue&&a===n.maxValue.format("Gi")||(n.setMaxValue(e),n.validate())),t&&(t.minValue&&a===t.minValue.format("Gi")||(t.setMinValue(e),t.validate())),!0}}),TimerangeTV.combo.TimerangeTV=function(e){e=e||{},Ext.applyIf(e,{xtype:"panel",layout:"column",autoHeight:!0,border:!1,width:400,items:[{xtype:"panel",columnWidth:.5,layout:"form",labelAlign:"top",border:!1,items:[new Ext.form.TimeField({fieldLabel:_("timerangetv.from"),name:"from"+e.tvId+"[]",id:"from"+e.tvId,format:e.timeFormat,increment:e.timeIncrement,minValue:e.minValue,maxValue:e.maxValue,enableKeyEvents:!0,allowBlank:e.allowBlank,value:e.timerangeStart,msgTarget:"under",vtype:"timerange",labelStyle:"padding-top:4px;",endTimeField:"to"+e.tvId,listeners:{change:{fn:this.timerangeOnChange,scope:this}}})]},{xtype:"panel",columnWidth:.5,layout:"form",labelAlign:"top",border:!1,items:[new Ext.form.TimeField({fieldLabel:_("timerangetv.to"),name:"to"+e.tvId+"[]",id:"to"+e.tvId,format:e.timeFormat,increment:e.timeIncrement,minValue:e.minValue,maxValue:e.maxValue,enableKeyEvents:!0,allowBlank:!0,value:e.timerangeEnd,msgTarget:"under",vtype:"timerange",labelStyle:"padding-top:4px;",startTimeField:"from"+e.tvId,listeners:{change:{fn:this.timerangeOnChange,scope:this}}})]}]}),TimerangeTV.combo.TimerangeTV.superclass.constructor.call(this,e)},Ext.extend(TimerangeTV.combo.TimerangeTV,MODx.Panel,{timerangeOnChange:function(){var e={from:Ext.getCmp("from"+this.config.tvId,this.config.timeFormat).getValue(),to:Ext.getCmp("to"+this.config.tvId,this.config.timeFormat).getValue()};this.setTVValue(e)},setTVValue:function(e){var t=this.getTVValue(),a="";e.from&&(a=e.from+"||",e.to&&(a+=e.to)),Ext.get("tv"+this.config.tvId).set({value:a}),t!==a&&MODx.fireResourceFormChange()},getTVValue:function(){return Ext.get("tv"+this.config.tvId).getValue()}}),Ext.reg("timerangetv-combo-timerangetv",TimerangeTV.combo.TimerangeTV),TimerangeTV.Renderer=function(e){if(!e.length)return"";var e=e.split("||"),t=1<=e.length&&new Date(e[0]),e=2<=e.length&&new Date(e[1]),a=MODx.config["timerangetv.time_format"]||MODx.config.manager_time_format,n=MODx.config["timerangetv.separator"]||"&thinsp;-&thinsp;",i="";return i=t&&t.getTime()?e&&e.getTime()&&t.getTime()!==e.getTime()?Ext.util.Format.date(t,a)+n+Ext.util.Format.date(e,a):Ext.util.Format.date(t,a):i};